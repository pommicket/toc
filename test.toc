#include "std/mem.toc", mem;
#include "std/io.toc", io;
#include "std/base.toc", base;

main ::= fn() {
	file, err := io.fopen_read("test.txt");
	if err {
		base.error("Couldn't open file.");
	}
	defer io.fclose(file);
	buf : [3]char;
	while !err {
		s := buf[:];
		err = io.fread(file, &s);
		io.writes(s);
	}
}

/*
// @TODO: fix this

bar ::= fn() (int, int) {
	return foo();
}
foo ::= fn() (int, int) {
	return 3, 5;
}

main ::= fn() {
	a, b := foo();
}
*/
